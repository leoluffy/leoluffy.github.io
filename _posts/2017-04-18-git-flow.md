---
layout: post
category : GIT
title: 'git开发流程梳理'
tagline: ""
tags : [GIT]
---
* auto-gen TOC:
{:toc}

# git开发流程梳理
遵循git flow开发流程，参考资料：   
[Git 在团队中的最佳实践--如何正确使用Git Flow](http://www.cnblogs.com/cnblogsfans/p/5075073.html)   
[阮一峰-Git分支管理策略](http://www.ruanyifeng.com/blog/2012/07/git.html)

## 内网debug环境（一般情况）
### debug代码分支
内网debug环境部署develop分支代码 

### debug开发流程
1. 接到功能开发需求
2. 从develop迁出feature分支
3. 功能开发完成（开发完成自测）
4. 合并到develop
5. 更新到debug环境测试

## 现实问题
1. 有些功能不打算跟随本版本出外服，但是要求先放到debug上去把功能测试完毕，如何处理？（因为debug上跑的develop的代码，要上debug就意味着要合并到develop，而之后的release又是从develop迁出的）
2. 如何解决已经合并到develop的功能代码，但这部分代码又不打算更新到外服？

## 解决方案
1. 为了解决上面提到的问题，我们决定新增一个预合并分支：pre-develop分支
2. 结合实际开发流程，并调整相关开发流程


## 内网debug环境（结合实际）
### debug代码分支
内网debug环境部署pre-develop分支代码                                                                                                          

### debug开发流程
1. 接到功能开发需求
2. 从develop迁出feature分支
3. 功能开发完成（开发完成自测）
4. 创建base为pre-develop分支，compare为feature分支的pull request，方便做code review
5. 更新pre-develop分支到debug环境测试
6. 确定该功能要发布到现网环境？则将feature分支合并到develop分支（可使用git flow工具）
7. 如果早前已合并到pre-develop分支的某些功能代码已取消不做，则删除pre-develop分支，重新从develop迁出pre-develop分支分支


## 内网release环境
若无内网release环境，则直接跳到外测服环境
### release代码分支
内网release环境部署release分支代码
### release开发流程
1. 完成当前版本所有功能开发
2. 从develop迁出release分支
3. 更新到release环境测试
4. 测试发现问题，则在release分支上修复
5. 完成release的整个测试和相关问题修复后，合并到develop和master分支（可使用git flow工具），并手动合并回pre_develop
6. 所有对master的操作，都需要打tag

## 外测服环境
1. 将release最新分支的代码更新到外测服  
2. 执行相关测试  
3. 若测试发现问题，则在release分支上修复
4. 完成release分支的整个测试和相关问题修复后，合并到develop和master分支（可使用git flow工具），并手动合并回pre_develop
5. 所有对master的操作，都需要打tag


## 外服修复bug
### 外服代码分支
外服环境部署master，一般为最新的tag分支
### 外服修复bug流程
1. 从master迁出hotfix分支
2. 修复问题
3. 合并到develop和master分支（可使用git flow工具），并手动合并回pre_develop
4. 所有对master的操作，都需要打tag
5. 更新master的tag版本到现网环境

